<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breakfast</title>
    <style>
        body {
            font-family: 'Playfair Display', serif;
            margin: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
        }
        h1 {
            text-align: center;
            color: black;
            font-size: 70px;
            margin-bottom: 20px;
        }
        .scroll-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 90%;
            max-width: 1200px;
        }
        .price-range {
            font-size: 20px;
            margin: 10px 0;
            color: #555;
        }
        .slider-container {
            width: 100%;
            margin: 20px 0;
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        input[type="range"] {
            width: 80%;
            appearance: none;
            height: 6px;
            background: #ddd;
            border-radius: 4px;
            transition: background 0.2s ease;
        }
        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: white;
            border: 4px solid black;
            cursor: pointer;
        }
        .price-value {
            font-size: 20px;
            color: #555;
            margin-top: 10px;
        }
        .recipe-list {
            margin-top: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            width: 100%;
        }
        .recipe-item {
            flex: 1 1 calc(25% - 20px);
            max-width: 250px;
            min-width: 200px;
            background: #f4f4f4;
            border-radius: 5px;
            text-align: center;
            padding: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .recipe-item img {
            width: 250px;
            height: 250px;
            object-fit: cover;
            border-radius: 5px;
        }
        .recipe-item p {
            margin: 10px 0 0;
            color: #666;
            font-size: 14px;
        }
    </style>
</head>
<body>

    <h1>Breakfast</h1>

    <div class="scroll-container">
        <div class="price-range">Price Range:</div>

        <div class="slider-container">
            <span>25</span>
            <input type="range" id="priceSlider" min="25" max="1000" value="25" step="15">
            <span>1000</span>
        </div>

        <div class="price-value">
            Selected Price: <span id="priceDisplay">25</span> Rupees
        </div>

        <div class="recipe-list" id="recipeList">
            <!-- Recipes will appear here -->
        </div>
    </div>

    <script>
        const priceSlider = document.getElementById("priceSlider");
        const priceDisplay = document.getElementById("priceDisplay");
        const recipeList = document.getElementById("recipeList");

        const recipes = [
            { price: 26, name: "Idli", image: "https://i.pinimg.com/736x/25/11/ae/2511aea623ba7893f6401be65b835f7b.jpg", link: "idly.html", description: "Steamed rice cakes, a classic South Indian breakfast." },
            { price: 13, name: "Dosa", image: "https://i.pinimg.com/736x/a6/e8/7a/a6e87aaa35f64beb6abbfeb1fbbfc4af.jpg", link: "dosa.html", description: "Thin, crispy, fermented rice crepe." },
            { price: 16, name: "Upma", image: "https://i.pinimg.com/736x/95/4e/d9/954ed9c5e30a41879373f115fe3a4417.jpg", link: "upma.html", description: "A healthy semolina-based breakfast dish." },
            {price:15,name:"Poha",image:"https://i.pinimg.com/736x/c4/91/2d/c4912db4557b80ff2aaf91c88d1f4588.jpg",link:"poha.html",description:"Flattened rice, spiced, quick breakfast."},
            {price:7,name:"Thepla",image:"https://i.pinimg.com/736x/db/83/22/db8322c60a49ca794eacd7f6a522bc66.jpg",link:"thepla.html",description:"Spiced flatbread made from whole wheat."},
            {price:17,name:"Kesari",image:"https://sinfullyspicy.com/wp-content/uploads/2022/02/Pineapple-Halwa-Side.jpg",link:"kesari.html",description:"Sweet semolina dessert with ghee."},
            {price:106,name:"Chole Bhature",image:"https://i.pinimg.com/736x/7f/55/b3/7f55b38f35f6760ed94f75f7596de747.jpg",link:"cholebhature.html",description:" Spiced chickpeas with deep-fried bread"},
            {price:9,name:"Pancake",image:"https://i.pinimg.com/736x/24/b3/26/24b326576650d53b8246d6c608c355bf.jpg",link:"pancake.html",description:"Fluffy, sweet, griddled breakfast treat."},
            {price:8,name:"Guntha Ponganalu",image:"https://i.pinimg.com/736x/81/32/32/813232af09c0627f0ad98b82847a4cb2.jpg",link:"gunthaponganalu.html",description:"Crispy rice-lentil dumplings, soft inside."},
            {price:4,name:"Oats",image:"https://i.pinimg.com/736x/63/50/9e/63509ed57ddbbdf50eba6b68d4030c5e.jpg",link:"oats.html",description:"Healthy whole grain, fiber-rich breakfast."},
            {price:7,name:"Pesarattu",image:"https://i.pinimg.com/736x/99/3c/23/993c231f8f58df9241e8e766beded79d.jpg",link:"pesarattu.html",description:"Crispy green gram dosa."},
            {price:41,name:"Peri-Peri Pasta",image:"https://i.pinimg.com/736x/8c/4d/88/8c4d88254265b6cc535aea98e9af35f1.jpg",link:"periperipasta.html",description:"Spicy, tangy pasta with peri-peri sauce."},
            {price:11,name:"Mysore Bonda",image:"https://i.pinimg.com/736x/a8/d7/98/a8d7988df1ff7736a4d3d6719afd8b08.jpg",link:"mysorebonda.html",description:"Crispy, fluffy deep-fried lentil fritters."},
            {price:12,name:"Lemon Rice",image:"https://i.pinimg.com/736x/d5/33/2a/d5332a56a0c608684c758aac714a0cd6.jpg",link:"lemonrice.html",description:"Zesty, tangy rice with spices."},
            {price:15,name:"Curd Rice",image:"https://i.pinimg.com/736x/af/07/0e/af070eb7e6313a1826e1331904027bf0.jpg",link:"curdrice.html",description:"Creamy yogurt rice with tempered spices."},
            {price:103,name:"Appam with Stew",image:"https://i.pinimg.com/736x/98/6e/b3/986eb30c91145e9880418c032ba8676d.jpg",link:"appamwithstew.html",description: "Fermented rice pancakes with coconut-based curry"},
            {price:6,name:"Ragi Khangi",image:"https://i.pinimg.com/736x/57/5c/ac/575cac41d45cd9767c2d1a4a1935951c.jpg",link:"ragikhangi.html",description:"Nourishing ragi porridge with buttermilk."},
            {price:7,name:"Onion Uthapam",image:"https://i.pinimg.com/736x/08/5f/14/085f14555cc84e0515b3b21a21ba346c.jpg",link:"onionuthapam.html",description:"Soft savory pancake with onions."},
            {price:48,name:"Sabudhana Upma",image:"https://www.vegrecipesofindia.com/wp-content/uploads/2013/10/sabudana-khichdi28.jpg",link:"sabhudhanaupma.html",description:"Tapioca pearls, spiced, savory delight."},
            { price: 29, name: "Pongal", image: "https://i.pinimg.com/736x/1b/80/3a/1b803ab835e1a08aa0efa30532b7d9d3.jpg", link: "pongal.html", description: "Comforting rice and lentil dish, seasoned with spices." },
            { price: 35, name: "Medu Vada", image: "https://i.pinimg.com/736x/de/a8/b5/dea8b58fe9d59cd0a13a1191f7a41bc0.jpg", link: "meduvada.html", description: "Crispy lentil doughnuts, perfect with chutney and sambar." },
            { price: 32, name: "Masala Dosa", image: "https://i.pinimg.com/736x/e8/49/4a/e8494a7a8a71af0c6b0a3f853e629ded.jpg", link: "masaladosa.html", description: "Crispy dosa stuffed with spiced potato filling." },
            { price: 19, name: "Uggani Bhaji", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRnpggPt8x0IMQ6k32J8SkYRcdukm8lCjVLnw&s", link: "ugganibhagi.html", description: "Seema Special...Spicy and flavorful South Indian delicacy." },
            { price: 4, name: "Semiya Upma", image: "https://i.pinimg.com/736x/c7/b9/64/c7b964fefb1b859a0894b82448b40398.jpg", link: "semiyaupma.html", description: "Light and savory vermicelli breakfast dish." },
        ];

        function renderBreakfasts(breakfastArray) {
    recipeList.innerHTML = "";
    breakfastArray.forEach(breakfast => {
        const item = document.createElement("div");
        item.classList.add("recipe-item");
        item.innerHTML = `
            <a href="${breakfast.link || "#"}" target="_blank">
                <img src="${breakfast.image}" alt="${breakfast.name}" style="width:200px;height:150px;border-radius:10px;"><br>
            </a>
            <h3>${breakfast.name}</h3>
            <p>${breakfast.description || ""}</p>
            <p>₹${breakfast.price} ${breakfast.favourites ? `| ❤️ ${breakfast.favourites}` : ""}</p>
        `;
        recipeList.appendChild(item);
    });
}

function updateFromBackend(budget) {
    fetch(`http://localhost:5000/breakfast-recipes?budget=${budget}`)
        .then(res => res.json())
        .then(data => {
            if (data.length > 0) {
                renderBreakfasts(data);
            } else {
                renderBreakfasts([]);
                recipeList.innerHTML = "<p>No breakfast recipes found in this budget range.</p>";
            }
        })
        .catch(err => {
            console.warn("Backend not reachable. Falling back to local data.", err);
            updateFromLocal(budget);
        });
}

function updateFromLocal(budget) {
    const filtered = recipes.filter(recipe => recipe.price <= budget);
    renderBreakfasts(filtered);
}

priceSlider.addEventListener("input", () => {
    const budget = parseInt(priceSlider.value);
    priceDisplay.textContent = budget;
    updateFromBackend(budget);
});

// Initialize
const initialBudget = parseInt(priceSlider.value);
priceDisplay.textContent = initialBudget;
updateFromBackend(initialBudget);

</script>
</body>
</html>
